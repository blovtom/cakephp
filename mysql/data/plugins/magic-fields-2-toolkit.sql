insert into plugins (id, name, testedUpTo, stableTag, requiresAtLeast, created, modified) values (2592, "Magic Fields 2 Toolkit", "4.1", "0.5.7.1", "3.6", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47604, 2592, "alt_get_audio", "/magic-fields-2-alt-get-audio.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47605, 2592, "tk_value_as_video__", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47606, 2592, "do_magic_fields", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47607, 2592, "tk_field_type", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47608, 2592, "get_field_names", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47609, 2592, "tk_value_as_image__", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47610, 2592, "alt_get_data", "/magic-fields-2-group-key.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47611, 2592, "tk_value_as_color", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47612, 2592, "display_magic_fields", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47613, 2592, "_get_group_index_for_key", "/magic-fields-2-group-key.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47614, 2592, "_get_name_mc", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47615, 2592, "tk_value_as_checkbox", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47616, 2592, "alt_get", "/magic-fields-2-group-key.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47617, 2592, "_dump_magic_field_mc", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47618, 2592, "_mf2tk_get_optional_field", "/magic-fields-2-get-optional-field.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47619, 2592, "get_group_id", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47620, 2592, "display_magic_field", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47621, 2592, "tk_value_as_audio", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47622, 2592, "url_to_link", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47623, 2592, "get_group_names", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47624, 2592, "get_field_options", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47625, 2592, "get_field_type", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47626, 2592, "media_url_to_link", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47627, 2592, "tk_filter_by_type__", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47628, 2592, "_mf2tk_get_media_srcs", "/magic-fields-2-get-optional-field.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47629, 2592, "get_unreferenced_image_files_in_folder_files_mf", "/magic-fields-2-clean-files_mf.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47630, 2592, "url_to_media", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47631, 2592, "tk_field_name", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47632, 2592, "get_field_id", "/magic-fields-2-utility-functions.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47633, 2592, "url_to_link2", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into functions (id, plugin_id, function_name, function_loc, created, modified) values (47634, 2592, "get_field_names_in_group", "/magic-fields-2-utility-functions.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355141, 2592, "Search_Using_Magic_Fields_Widget", "join_arrays", "/magic-fields-2-search-by-custom-field-kai.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355142, 2592, "alt_related_type_field", "_update_description", "/alt_related_type_field/alt_related_type_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355143, 2592, "alt_image_field", "display_field", "/alt_image_field/alt_image_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355144, 2592, "alt_audio_field", "_update_description", "/alt_audio_field/alt_audio_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355145, 2592, "alt_image_field", "get_image", "/alt_image_field/alt_image_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355146, 2592, "alt_textbox_field", "get_properties", "/alt_textbox_field/alt_textbox_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355147, 2592, "alt_table_field", "_options", "/alt_table_field/alt_table_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355148, 2592, "Search_Using_Magic_Fields_Widget", "widget", "/magic-fields-2-search-by-custom-field-kai.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355149, 2592, "alt_table_field", "get_properties", "/alt_table_field/alt_table_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355150, 2592, "alt_numeric_field", "display_field", "/alt_numeric_field/alt_numeric_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355151, 2592, "alt_url_field", "display_field", "/alt_url_field/alt_url_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355152, 2592, "Magic_Fields_2_Toolkit_Dumb_Shortcodes", "__construct", "/magic-fields-2-dumb-shortcodes-kai.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355153, 2592, "alt_related_type_field", "_options", "/alt_related_type_field/alt_related_type_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355154, 2592, "Magic_Fields_2_Toolkit_Settings", "__construct", "/magic-fields-2-toolkit-settings.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355155, 2592, "alt_embed_field", "display_field", "/alt_embed_field/alt_embed_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355156, 2592, "alt_dropdown_field", "_update_description", "/alt_dropdown_field/alt_dropdown_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355157, 2592, "alt_url_field", "_update_description", "/alt_url_field/alt_url_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355158, 2592, "alt_audio_field", "display_field", "/alt_audio_field/alt_audio_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355159, 2592, "alt_dropdown_field", "_options", "/alt_dropdown_field/alt_dropdown_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355160, 2592, "alt_textbox_field", "_options", "/alt_textbox_field/alt_textbox_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355161, 2592, "alt_embed_field", "get_embed", "/alt_embed_field/alt_embed_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355162, 2592, "alt_url_field", "_options", "/alt_url_field/alt_url_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355163, 2592, "alt_table_field", "display_field", "/alt_table_field/alt_table_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355164, 2592, "alt_textbox_field", "_update_description", "/alt_textbox_field/alt_textbox_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355165, 2592, "alt_image_field", "_options", "/alt_image_field/alt_image_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355166, 2592, "alt_related_type_field", "display_field", "/alt_related_type_field/alt_related_type_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355167, 2592, "alt_video_field", "get_video", "/alt_video_field/alt_video_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355168, 2592, "alt_dropdown_field", "display_field", "/alt_dropdown_field/alt_dropdown_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355169, 2592, "alt_table_field", "_update_description", "/alt_table_field/alt_table_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355170, 2592, "Magic_Fields_2_Toolkit_Dumb_Macros", "__construct", "/magic-fields-2-dumb-macros.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355171, 2592, "alt_numeric_field", "_update_description", "/alt_numeric_field/alt_numeric_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355172, 2592, "alt_url_field", "get_url", "/alt_url_field/alt_url_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355173, 2592, "alt_template_field", "_update_description", "/alt_template_field/alt_template_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355174, 2592, "alt_template_field", "get_properties", "/alt_template_field/alt_template_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355175, 2592, "Search_Using_Magic_Fields_Widget", "__construct", "/magic-fields-2-search-by-custom-field-kai.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355176, 2592, "alt_audio_field", "get_audio", "/alt_audio_field/alt_audio_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355177, 2592, "alt_template_field", "_options", "/alt_template_field/alt_template_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355178, 2592, "alt_textbox_field", "display_field", "/alt_textbox_field/alt_textbox_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355179, 2592, "alt_image_field", "_update_description", "/alt_image_field/alt_image_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355180, 2592, "alt_video_field", "_update_description", "/alt_video_field/alt_video_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355181, 2592, "alt_template_field", "display_field", "/alt_template_field/alt_template_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355182, 2592, "alt_numeric_field", "_options", "/alt_numeric_field/alt_numeric_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355183, 2592, "alt_embed_field", "_update_description", "/alt_embed_field/alt_embed_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355184, 2592, "Search_Using_Magic_Fields_Widget", "update", "/magic-fields-2-search-by-custom-field-kai.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355185, 2592, "Magic_Fields_2_Toolkit_Init", "__construct", "/magic-fields-2-toolkit.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355186, 2592, "alt_embed_field", "_options", "/alt_embed_field/alt_embed_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355187, 2592, "alt_audio_field", "_options", "/alt_audio_field/alt_audio_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355188, 2592, "alt_numeric_field", "get_numeric", "/alt_numeric_field/alt_numeric_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355189, 2592, "alt_video_field", "_options", "/alt_video_field/alt_video_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355190, 2592, "alt_video_field", "display_field", "/alt_video_field/alt_video_field.php", now(), now());
insert into methods (id, plugin_id, class_name, method_name, method_loc, created, modified) values (355191, 2592, "Search_Using_Magic_Fields_Widget", "form", "/magic-fields-2-search-by-custom-field-kai.php", now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27950, 2592, "parse_query", "function (&$query)
{
	if((!$query->is_main_query() || !array_key_exists('magic_fields_search_form',$_REQUEST))) {
	return;
}$option = get_option($_REQUEST['magic_fields_search_widget_option']);$number = $_REQUEST['magic_fields_search_widget_number'];if(isset($option[$number]['set_is_search'])) {
	$query->is_search = true;
}
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27951, 2592, "settings_page_magic-fields-2-toolkit-page", "function ()
{
	echo('<div style="clear:both;padding:20px;border:2px solid black;margin:20px;">');get_unreferenced_image_files_in_folder_files_mf();echo('</div>');
}", 11, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27952, 2592, "admin_notices", "function () use ('major','minor','tested_major','tested_minor')
{
	echo('<div style="padding:10px 20px;border:2px solid red;margin:50px 20px;font-weight:bold;">
    NextGEN Gallery's nggtags for WordPress's Media Library will not work with PHP version '.$major.'.'.$minor.';
    Please uninstall it or upgrade your PHP version to '.$tested_major.'.'.$tested_minor.' or later.
</div>');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27953, 2592, "wp_enqueue_scripts", "function ()
{
	wp_enqueue_style('search',plugins_url('search.css',__FILE__));wp_enqueue_script('jquery');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27954, 2592, "wp_ajax_mf2tk_update_content_macro", "function ()
{
	global $wpdb;$ids = $wpdb->get_col('SELECT ID FROM '.$wpdb->posts.' WHERE post_type = 'content_macro'
    AND post_title = ''.$_POST['title'].'' AND post_status = 'publish'');$post = array('post_type' => 'content_macro','post_name' => $_POST['slug'],'post_title' => $_POST['title'],'post_status' => 'publish','post_content' => $_POST['text']);if($ids) {
	$post['ID'] = $ids[0];
	$id0 = wp_update_post($post);
}
else {
  $id1 = wp_insert_post($post);
}
exit(!empty($id0)?'Content template '.$id0.' updated.':!empty($id1)?'Content template '.$id1.' created.':'Error: Content template not created/updated.');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27955, 2592, "wp_ajax_mf2tk_update_search_result_template", "function ()
{
	global $wpdb;$fields_filters = get_option(Search_Using_Magic_Fields_Widget::SEARCH_RESULTS_FIELDS_AND_FILTERS
,array());$fields_filters[$_POST['post_type']] = $_POST['fields_filters'];update_option(Search_Using_Magic_Fields_Widget::SEARCH_RESULTS_FIELDS_AND_FILTERS
,$fields_filters);$post_name = (Search_Using_Magic_Fields_Widget::SEARCH_RESULTS_TEMPLATE_PREFIX
 . $_POST['post_type']);$ids = $wpdb->get_col('SELECT ID FROM '.$wpdb->posts.' WHERE post_type = 'content_macro'
    AND post_name = ''.$post_name.'' AND post_status = 'publish'');$post = array('post_type' => 'content_macro','post_name' => $post_name,'post_title' => 'Search Result Template for '.$_POST['post_type'],'post_status' => 'publish','post_content' => $_POST['text']);if($ids) {
	$post['ID'] = $ids[0];
	$id0 = wp_update_post($post);
}
else {
  $id1 = wp_insert_post($post);
}
exit(!empty($id0)?'Content template '.$id0.' updated.':!empty($id1)?'Content template '.$id1.' created.':'Error: Content template not created/updated.');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27956, 2592, "init", "function ()
{
	register_post_type('content_macro',array('label' => 'Content Templates','description' => 'defines a single macro for HTML and WordPress shortcodes macro','public' => TRUE,'exclude_from_search' => TRUE,'public_queryable' => FALSE,'show_ui' => TRUE,'show_in_nav_menus' => FALSE,'show_in_menu' => TRUE,'menu_position' => 50));
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27957, 2592, "admin_enqueue_scripts", "function ()
{
	wp_enqueue_style('admin',plugins_url('admin.css',__FILE__));
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27958, 2592, "admin_init", "function ()
{
	if(!defined('MF_PATH')) {
	return;
}$options = get_option('magic_fields_2_toolkit_enabled',array());foreach(self::$fields as $field) {
	self::sync_field_and_option($field,$options);
}register_setting('magic_fields_2_toolkit','magic_fields_2_toolkit_enabled',function ($input)
{
	if(($input === NULL)) {
	$input = array();
}$options = get_option('magic_fields_2_toolkit_enabled',array());foreach(self::$fields as $field) {
	$input = self::do_field_type_option($field,$input,$options);
}return $input;
});add_settings_section('magic_fields_2_toolkit_settings_sec','',function ()
{
	echo(__('<h3>Use this form to enable specific features.</h3>','mf2tk'));
},'magic-fields-2-toolkit-page');$options = get_option('magic_fields_2_toolkit_enabled',array());$settings = array(array('dumb_shortcodes','Dumb Shortcodes','shortcode'),array('dumb_macros','Content Templates','macros'),array('alt_template_field','Alt Template Field','alt_template'),array('alt_table_field','Alt Table Field','alt_table'),array('alt_numeric_field','Alt Numeric Field','alt_numeric'),array('alt_url_field','Alt URL Field','alt_url'),array('alt_related_type_field','Alt Related Type Field','alt_related'),array('alt_embed_field','Alt Embed Field','embed'),array('alt_video_field','Alt Video Field','video'),array('alt_audio_field','Alt Audio Field','audio'),array('alt_image_field','Alt Image Field','image'),array('alt_textbox_field','Alt Textbox Field','alt_textbox'),array('alt_dropdown_field','Alt Dropdown Field','alt_dropdown'),array('search_using_magic_fields','Search using Magic Fields','search'),array('custom_post_copier','Custom Post Copier','copy'),array('clean_files_mf','Clean Folder files_mf','unreferenced'),array('alt_get_audio','Alt Get Audio','alt_audio'),array('utility_functions','Utility Functions','utility_functions'));array_walk($settings,function ($v,$i,$options)
{
	$name = $v[0];$title = $v[1];$help = $v[2];add_settings_field('magic_fields_2_toolkit_'.$name,__($title,'mf2tk'),function () use ('name','help','options')
{
	echo((('<input name="magic_fields_2_toolkit_enabled['.$name.']" type="checkbox" value="enabled"' . (is_array($options) && array_key_exists($name,$options))?' checked':'') . '>'));echo((('<a href="http://magicfields17.wordpress.com/magic-fields-2-toolkit-0-4-2/#'.$help.'" ' . 'target="_blank"><div class="dashicons dashicons-info" ') . 'style="text-decoration:none;padding-left:7px;"></div></a>'));
},'magic-fields-2-toolkit-page','magic_fields_2_toolkit_settings_sec');
},$options);
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27959, 2592, "admin_notices", "function () use ('error')
{
	echo((('<div class="error"><p>' . $error) . '</p></div>'));
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27960, 2592, "wp_ajax_mf2tk_get_search_result_template", "function ()
{
	global $wpdb;$post_name = (Search_Using_Magic_Fields_Widget::SEARCH_RESULTS_TEMPLATE_PREFIX
 . $_POST['post_type']);$template = $wpdb->get_col('SELECT post_content FROM '.$wpdb->posts.' WHERE post_type = 'content_macro'
    AND post_name = ''.$post_name.'' AND post_status = 'publish'');if($template) {
	exit($template[0]);
}
else {
  exit(Search_Using_Magic_Fields_Widget::TEMPLATE_NOT_FOUND
);
}

}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27961, 2592, "plugins_loaded", "function ()
{
	load_plugin_textdomain('magic-fields-2-toolkit',FALSE,(dirname(plugin_basename(__FILE__)) . '/languages/'));
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27962, 2592, "admin_enqueue_scripts", "function ()
{
	wp_enqueue_style('mf2tk-jquery-ui',plugins_url('mf2tk-jquery-ui.min.css',__FILE__));wp_enqueue_script('jquery-ui-tabs');wp_enqueue_script('mf2tk_clean_mf_files',plugins_url('js/mf2tk_clean_mf_files.js',__FILE__),array('jquery'));
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27963, 2592, "wp_ajax_mf2tk_get_search_result_template_form", "function ()
{
	global $wpdb;$post_type = $_POST['post_type'];?><!-- start create/edit search result template -->
<div id="mf2tk-edit-search-result-template-div">
    <button id="mf2tk-edit-search-result-template-close-button" style="float:right;">X</button>
    <h3 id="mf2tk-edit-search-result-template-h3">Create Search Result Template for Post Type: <?phpecho($post_type);?></h3>
    <div style="clear:both;">
<?php$field_and_filters = get_option(Search_Using_Magic_Fields_Widget::SEARCH_RESULTS_FIELDS_AND_FILTERS
,array());$input_value = '';$matches = array();if(array_key_exists($post_type,$field_and_filters)) {
	$input_value = $field_and_filters[$post_type];
	preg_match('/field=([\w;]+)\|filter=([\w;]+)/',$input_value,$matches);
}$fields = array_key_exists(1,$matches)?$matches[1]:'';$filters = array_key_exists(2,$matches)?$matches[2]:'';$fields0 = (array_key_exists(1,$matches) && $matches[1])?explode(';',$matches[1]):array();$filters0 = array();if((array_key_exists(2,$matches) && $matches[2])) {
	foreach(explode(';',$matches[2]) as $filter) {
		if((preg_match('/^(\w+)__(w|h)(\d+)$/',$filter,$filter_matches) === 1)) {
			$filters0[$filter_matches[1]] = array($filter_matches[2],$filter_matches[3]);
		}
		else {
		  $filters0[$filter] = null;
		}
		
	}
}$default_height = 50;$MF_TABLE_CUSTOM_FIELDS = MF_TABLE_CUSTOM_FIELDS;$results = $wpdb->get_col('SELECT name FROM '.$MF_TABLE_CUSTOM_FIELDS.' WHERE post_type = ''.$post_type.'' AND type != 'alt_table' AND type != 'alt_template'');array_unshift($results,'__post_title','__post_author');$checked_fields = array_intersect($fields0,$results);$unchecked_fields = array_diff($results,$checked_fields);$all_fields = array_merge(array_map(function ($v)
{
	return true;
},array_flip($checked_fields)),array_map(function ($v)
{
	return false;
},array_flip($unchecked_fields)));foreach(array('tk_value_as_color','tk_value_as_checkbox','tk_value_as_audio','tk_value_as_image','tk_value_as_video','url_to_link2') as $filter) {
	$filter_checked = ($filter . '_checked');
	$$filter_checked = array_key_exists($filter,$filters0)?' checked':'';
}$tk_value_as_image_height_checked = ' checked';$tk_value_as_image_width_checked = '';$tk_value_as_image_size = $default_height;if(array_key_exists('tk_value_as_image',$filters0)) {
	if(($filters0['tk_value_as_image'][0] === 'h')) {
		$tk_value_as_image_height_checked = ' checked';
		$tk_value_as_image_width_checked = '';
	}
	else {
	  $tk_value_as_image_height_checked = '';$tk_value_as_image_width_checked = ' checked';
	}
	
	$tk_value_as_image_size = $filters0['tk_value_as_image'][1];
}$tk_value_as_video_height_checked = ' checked';$tk_value_as_video_width_checked = '';$tk_value_as_video_size = $default_height;if(array_key_exists('tk_value_as_video',$filters0)) {
	if(($filters0['tk_value_as_video'][0] === 'h')) {
		$tk_value_as_video_height_checked = ' checked';
		$tk_value_as_video_width_checked = '';
	}
	else {
	  $tk_value_as_video_height_checked = '';$tk_value_as_video_width_checked = ' checked';
	}
	
	$tk_value_as_video_size = $filters0['tk_value_as_video'][1];
}?>    <div class="mf2tk-field-input-optional">
        <div class="mf2tk-field_value_pane" style="clear:both;">
            <textarea id="mf2tk-search-result-template-textarea" class="mf2tk-how-to-use" rows="10">
<!-- This was generated by the toolkit from the specified fields and filters.
     Use this as a base content template and edit it to your liking.          -->
&lt;div&gt;
&lt;style scoped&gt;
table.mf2tk-<?phpecho($post_type);?>-table{border-collapse:collapse;}
table.mf2tk-<?phpecho($post_type);?>-table,table.mf2tk-<?phpecho($post_type);?>-table td,
    table.mf2tk-<?phpecho($post_type);?>-table th{border:2px solid black;}
table.mf2tk-<?phpecho($post_type);?>-table td,table.mf2tk-<?phpecho($post_type);?>-table th{padding:7px 10px 3px 10px;}
table.mf2tk-<?phpecho($post_type);?>-table th{background-color:rgb(128,128,128);
    background-image:url(data:image/gif;base64,R0lGODlhFQAJAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);
    background-position:100% 50%;background-repeat:no-repeat;color:black;text-align:center;}
&lt;/style&gt;
&lt;table class="mf2tk-<?phpecho($post_type);?>-table tablesorter"&gt;
[show_custom_field
    post_id="$#a_post#"
    field="<?phpecho($fields);?>"
    before="&lt;span style='display:none;'&gt;"
    after="&lt;/span&gt;"
    field_before="&lt;th class='mf2tk-&lt;!--$field--&gt;-th'&gt;&lt;!--$Field--&gt;"
    field_after="&lt;/th&gt;"
    post_before="&lt;thead&gt;&lt;tr&gt;"
    post_after="&lt;/tr&gt;&lt;/thead&gt;"
]
&lt;tbody&gt;
[show_custom_field
    post_id="$#posts#"
    field="<?phpecho($fields);?>"
    filter="<?phpecho($filters);?>"
    separator=", "
    field_before="&lt;td class='mf2tk-&lt;!--$field--&gt;-td'&gt;"
    field_after="&lt;/td&gt;"
    post_before="&lt;tr&gt;"
    post_after="&lt;/tr&gt;"
]
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</textarea>
<button id="mf2tk-save-search-result-template-button" style="float:right;">Save the Content Template</button>
        </div>
    </div>
    <!-- optional configuration field -->
    <div class="mf2tk-field-input-optional">
        <h6>Re-Configure the Content Template</h6>
        <div class="mf2tk-field_value_pane" style="clear:both;">
            <fieldset class="mf2tk-configure mf2tk-fields">
                <legend>Fields:</legend>
                <!-- before drop point -->
                <div><div class="mf2tk-dragable-field-after"></div></div>
<?phpforeach($all_fields as $field => $is_checked) {
	$checked = $is_checked?' checked':'';
	?>                <div class="mf2tk-dragable-field">
	                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
	                        value="<?php
	echo($field);
	?>"<?php
	echo($checked);
	?>><?php
	echo($field);
	?></label><br>
	                    <!-- a drop point -->
	                    <div class="mf2tk-dragable-field-after"></div>
	                </div>
	<?php
}?>                <span>Use drag and drop to change field order</span>
            </fieldset>
            <fieldset class="mf2tk-configure mf2tk-filters">
                <legend>Filters:</legend>
                <div>
                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
                        value="tk_value_as_color"<?phpecho($tk_value_as_color_checked);?>>tk_value_as_color</label>
                </div>
                <div>
                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
                        value="tk_value_as_checkbox"<?phpecho($tk_value_as_checkbox_checked);?>>tk_value_as_checkbox</label>
                </div>
                <div>
                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
                    value="tk_value_as_audio"<?phpecho($tk_value_as_audio_checked);?>>tk_value_as_audio</label>
                </div>
                <div>
                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
                        value="tk_value_as_image__"<?phpecho($tk_value_as_image_checked);?>>tk_value_as_image__</label>
                    <label class="mf2tk-configure"><input type="radio" class="mf2tk-configure" name="tk_value_as_image_{$post_type}"
                        value="width"<?phpecho($tk_value_as_image_width_checked);?>>Width</label>
                    <label class="mf2tk-configure"><input type="radio" class="mf2tk-configure" name="tk_value_as_image_{$post_type}"
                        value="height"<?phpecho($tk_value_as_image_height_checked);?>>Height</label>
                    <label class="mf2tk-configure"><input type="number" class="mf2tk-configure" max="9999"
                        value="<?phpecho($tk_value_as_image_size);?>"></label>
                </div>
                <div>
                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
                        value="tk_value_as_video__"<?phpecho($tk_value_as_video_checked);?>>tk_value_as_video__</label>
                    <label class="mf2tk-configure"><input type="radio" class="mf2tk-configure" name="tk_value_as_video_{$post_type}"
                        value="width"<?phpecho($tk_value_as_video_width_checked);?>>Width</label>
                    <label class="mf2tk-configure"><input type="radio" class="mf2tk-configure" name="tk_value_as_video_{$post_type}"
                        value="height"<?phpecho($tk_value_as_video_height_checked);?>>Height</label>
                    <label class="mf2tk-configure"><input type="number" class="mf2tk-configure" max="9999"
                        value="<?phpecho($tk_value_as_video_size);?>"></label>
                </div>
                <div>
                    <label class="mf2tk-configure"><input type="checkbox" class="mf2tk-configure"
                        value="url_to_link2"<?phpecho($url_to_link2_checked);?>>url_to_link2</label>
                </div>
            </fieldset>
            <button id="mf2tk-search-result-template-refresh-button" style="float:right;">Refresh the Content Template</button>
        </div>
    </div>
    <input type="hidden" id="mf2tk-search-result-template-fields-filters-input" value="<?phpecho($input_value);?>">
    </div>
</div>
<script type="text/javascript">
(function(){
    var postType="<?phpecho($post_type);?>";
    var div=jQuery("div#mf2tk-edit-search-result-template-div");
    div.find("button#mf2tk-edit-search-result-template-close-button").click(function(e){
        this.parentNode.parentNode.style.display="none";
        jQuery(this.parentNode.parentNode).empty();
        jQuery("div#mf2tk-background").remove();
        e.preventDefault();
        return false;
    });
    div.find("button#mf2tk-search-result-template-refresh-button").click(function(e){
        var fields="";
        var filters="";
        var parent=jQuery(this.parentNode);
        parent.find("fieldset.mf2tk-configure.mf2tk-fields input[type='checkbox']").each(function(){
            var input=jQuery(this);
            if(input.prop("checked")){
                if(fields){fields+=";";}
                fields+=input.prop("value");
            }
        });
        parent.find("fieldset.mf2tk-configure.mf2tk-filters input[type='checkbox']").each(function(){
            var input=jQuery(this);
            if(input.prop("checked")){
                var name=input.prop("value");
                if(name==="tk_value_as_image__"||name==="tk_value_as_video__"){
                    if(jQuery(this.parentNode.parentNode).find("input[type='radio'][value='width']").prop("checked")){
                        name+="w";
                    }else{
                        name+="h";
                    }
                    name+=jQuery(this.parentNode.parentNode).find("input[type='number']").val().trim();
                }
                if(filters){filters+=";";}
                filters+=name;
            }
        });
        var textarea=div.find("textarea#mf2tk-search-result-template-textarea");
        var text=textarea.val();
        text=text.replace(/field="([\w;]*)"/g,function(match,old){return 'field="'+fields+'"';});
        text=text.replace(/filter="([\w;]*)"/g,function(match,old){return 'filter="'+filters+'"';});
        textarea.val(text);
        jQuery("input#mf2tk-search-result-template-fields-filters-input").val("field="+fields+"|filter="+filters);
        e.preventDefault();
        return false;
    });
    div.find("div.mf2tk-dragable-field").draggable({cursor:"crosshair",revert:true});
    div.find("div.mf2tk-dragable-field-after").droppable({accept:"div.mf2tk-dragable-field",tolerance:"touch",
        hoverClass:"mf2tk-hover",drop:function(e,u){
            jQuery(this.parentNode).after(u.draggable);
    }});
    div.find("button#mf2tk-save-search-result-template-button").click(function(e){
        var text=div.find("textarea#mf2tk-search-result-template-textarea").val();
        var fieldsFilters=div.find("input#mf2tk-search-result-template-fields-filters-input").val();
        jQuery.post(ajaxurl,
            {action:'mf2tk_update_search_result_template',post_type:postType,text:text,fields_filters:fieldsFilters},
            function(r){
                alert(r);
                window.mf2tkSearchTemplateTextarea.val(text);
            });
        e.preventDefault();
        return false;
    });
}());
</script>
<!-- end create/edit search result template -->
<?phpexit();
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27964, 2592, "admin_menu", "function ()
{
	if(!defined('MF_PATH')) {
	return;
}add_options_page('Magic Fields 2 Toolkit','Magic Fields 2 Toolkit','manage_options','magic-fields-2-toolkit-page',function ()
{
	if((isset($_GET['settings-updated']) && ($_GET['settings-updated'] == TRUE))) {
}echo('<h1>Magic Fields 2 Toolkit</h1>');echo('<form method="post" action="options.php">');settings_fields('magic_fields_2_toolkit');do_settings_sections('magic-fields-2-toolkit-page');submit_button();echo('</form>');echo(((((((('<div style="border:2px solid black;' . 'background-color:LightGray;padding:10px;') . 'margin:30px 25px;font-size:larger;') . 'font-weight:bold;">') . 'For usage instructions please visit ') . '<a href="http://magicfields17.wordpress.com/') . 'magic-fields-2-toolkit-0-4-2/">') . ' the online documentation</a>.</div>'));
});
}", 11, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27965, 2592, "admin_enqueue_scripts", "function ($hook)
{
	global $wp_scripts;if((($hook !== 'post.php') && ($hook !== 'post-new.php'))) {
	return;
}wp_enqueue_style('admin',plugins_url('admin.css',__FILE__));wp_enqueue_script('mf2tk_alt_media_admin',plugins_url('magic-fields-2-toolkit/js/mf2tk_alt_media_admin.js'),array('jquery'));wp_enqueue_script('mf2tk_alt_media',plugins_url('magic-fields-2-toolkit/js/mf2tk_alt_media.js'),array('jquery'));$options = get_option('magic_fields_2_toolkit_enabled',array());$mf2tkDisableHowToUse = array_key_exists('dumb_shortcodes',$options)?'false':'true';$wp_scripts->add_data('mf2tk_alt_media_admin','data','var mf2tkDisableHowToUse='.$mf2tkDisableHowToUse.';');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27966, 2592, "admin_enqueue_scripts", "function ()
{
	wp_enqueue_style('admin',plugins_url('admin.css',__FILE__));wp_enqueue_style('dashicons');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27967, 2592, "widgets_init", "function ()
{
	register_widget('Search_Using_Magic_Fields_Widget');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27968, 2592, "admin_notices", "function ()
{
	?><div style="clear:both;font-weight:bold;border:2px solid red;padding:5px 10px;margin:10px;">Magic Templates requires that plugin <a href="https://wordpress.org/plugins/magic-fields-2/">Magic Fields 2</a> be installed
and activated.</div> 
<?php
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27969, 2592, "wp_head", "function ()
{
	?><script type="text/javascript">
    jQuery(document).ready(function(){jQuery("table.tablesorter").tablesorter();}); 
</script>
<?php
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27970, 2592, "admin_notices", "function ()
{
	?><div style="clear:both;border:2px solid red;padding:5px 10px;margin:10px;">
After installing Magic Fields 2 Toolkit you should visit its settings page -
<a href="<?phpecho(admin_url('options-general.php?page=magic-fields-2-toolkit-page'));?>">
Settings -> Magic Fields 2 Toolkit</a>.
</div>
<?phpdelete_transient('magic_fields_2_tolkit_activated');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27971, 2592, "admin_footer-post-new.php", "$alt_template", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27972, 2592, "admin_enqueue_scripts", "function ()
{
	wp_enqueue_script('jquery-ui-draggable');wp_enqueue_script('jquery-ui-droppable');
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27973, 2592, "admin_print_footer_scripts", "function ()
{
	global $hook_suffix;if((($hook_suffix === 'post.php') || ($hook_suffix === 'post-new.php'))) {
	?><script type="text/javascript">
	    (function(){
	        var a=document.createElement("a");
	        a.className="button";
	        a.href="#";
	        a.textContent="Save as Template";
	        jQuery("a#insert-media-button").after(a);
	        jQuery(a).click(function(){
	            var slug=jQuery("div#slugdiv input#post_name").val();
	            var title=jQuery("div#post-body-content div#titlediv input#title").val();
	            var text=jQuery("div#post-body-content div#wp-content-editor-container textarea#content").val();
	            jQuery.post(ajaxurl,{action:'mf2tk_update_content_macro',slug:slug,title:title,text:text},function(r){
	                alert(r);
	            });
	        });
	        var a=document.createElement("a");
	        a.className="button";
	        a.href="#";
	        a.textContent="Insert Template";
	        jQuery("a#insert-media-button").after(a);
	        jQuery(a).click(function(){
	            var windowWidth=jQuery(window).width();
	            var windowHeight=jQuery(window).height();
	            var width=windowWidth>800?800:Math.floor(windowWidth*9/10);
	            var height=Math.floor(windowHeight*9/10);
	            var div=jQuery("div#mf2tk-alt-template");
	            var style=div[0].style;
	            style.position="fixed";
	            style.width=width+"px";
	            style.height=height+"px";
	            style.overflow="auto";
	            style.left=Math.floor((windowWidth-width)/2)+"px";
	            style.top=Math.floor((windowHeight-height)/2)+"px";
	            style.backgroundColor="lightgray";
	            style.border="3px solid black";
	            style.zIndex=100000;
	            style.display="block";
	            div.find("button#button-mf2tk-alt-template-close").click(function(){
	                this.parentNode.style.display="none";
	            });
	        });
	    }());
	</script>
	<?php
}
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27974, 2592, "template_redirect", "function ()
{
	global $wp_query,$wpdb;if(!class_exists('Magic_Fields_2_Toolkit_Dumb_Shortcodes')) {
	include_once (dirname(__FILE__) . '/magic-fields-2-dumb-shortcodes-kai.php');
}if(!class_exists('Magic_Fields_2_Toolkit_Dumb_Macros')) {
	include_once (dirname(__FILE__) . '/magic-fields-2-dumb-macros.php');
}if(!$wp_query->posts) {
	get_header();
	echo(__('Nothing found','mf2tk'));
	get_footer();
	exit();
}$posts = array_map(function ($post)
{
	return $post->ID;
},$wp_query->posts);$option = get_option($_REQUEST['magic_fields_search_widget_option']);$number = $_REQUEST['magic_fields_search_widget_number'];$show_fields = ('show-' . $_REQUEST['post_type']);$fields = (is_array($option[$number]) && array_key_exists($show_fields,$option[$number]))?$option[$number][$show_fields]:array();if(!$fields) {
	$fields = $option[$number][$_REQUEST['post_type']];
}$fields = array_filter(array_map(function ($field)
{
	if(((substr_compare($field,'tax-cat-',0,8,false) === 0) || (substr_compare($field,'tax-tag-',0,8,false) === 0))) {
	return substr($field,8);
}
else {
  if(($field === 'pst-std-post_author')) {
	return '__post_author';
}
else {
  if((substr_compare($field,'pst-std-',0,8,false) === 0)) {
	return false;
}
else {
  return ($field . '<*,*>');
}

}

}

},$fields));$post_name = (Search_Using_Magic_Fields_Widget::SEARCH_RESULTS_TEMPLATE_PREFIX
 . $_REQUEST['post_type']);$macro = $wpdb->get_col('SELECT post_content FROM '.$wpdb->posts.' WHERE post_type = 'content_macro'
    AND post_name = ''.$post_name.'' AND post_status = 'publish'');if($macro) {
	$macro = $macro[0];
	$post_type_specific = true;
}
else {
  $macro = $option[$number]['table_shortcode'];if(empty($macro)) {
	$macro = Search_Using_Magic_Fields_Widget::DEFAULT_CONTENT_MACRO
	;
}$macro = htmlspecialchars_decode($macro);
}
if((array_key_exists('table_width',$option[$number]) and $table_width = $option[$number]['table_width'])) {
	$table_width = ' style='width:'.$table_width.'px;'';
}$post = $posts[0];$posts = implode(',',$posts);$fields = implode(';',$fields);if(!empty($post_type_specific)) {
	$content = '[show_macro posts="'.$posts.'" a_post="'.$post.'"]'.$macro.'[/show_macro]';
}
else {
  $content = '[show_macro posts="'.$posts.'" fields="'.$fields.'" a_post="'.$post.'" post_type="'.$_REQUEST['post_type'].'" table_width="'.$table_width.'"]
'.$macro.'
[/show_macro]';
}
wp_enqueue_script('jquery');wp_enqueue_script('jquery.tablesorter.min',plugins_url('jquery.tablesorter.min.js',__FILE__),array('jquery'));add_action('wp_head',function ()
{
	?><script type="text/javascript">
    jQuery(document).ready(function(){jQuery("table.tablesorter").tablesorter();}); 
</script>
<?php
});get_header();$content = do_shortcode($content);echo($content);get_footer();exit();
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27975, 2592, "admin_notices", "function ()
{
	if($deleted = get_transient('deleted_files_mc17')) {
	echo('<div style="padding:0px 20px;border:1px solid red;margin:20px;">'.$deleted.'</div>');
	delete_transient('deleted_files_mc17');
}
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27976, 2592, "admin_init", "function ()
{
	if(!is_plugin_active('magic-fields-2/main.php')) {
	add_action('admin_notices',function ()
	{
		?><div style="clear:both;font-weight:bold;border:2px solid red;padding:5px 10px;margin:10px;">Magic Templates requires that plugin <a href="https://wordpress.org/plugins/magic-fields-2/">Magic Fields 2</a> be installed
	and activated.</div> 
	<?php
	});
}
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27977, 2592, "admin_action_magic_fields_2_toolkit_copy_post", "function ()
{
	global $wpdb;try {
	$result = $wpdb->get_results(((('SELECT * FROM ' . $wpdb->posts) . ' WHERE ID = ') . $_REQUEST['post']),ARRAY_A);$post = $result[0];unset($post['ID']);$post['guid'] = '';$post['post_name'] = '';$post['post_status'] = 'draft';$post['post_title'] = ('Copy of ' . $post['post_title']);$post['post_author'] = get_current_user_id();$post['post_date'] = current_time('mysql');$post['post_date_gmt'] = '0000-00-00 00:00:00';$post['post_modified'] = $post['post_date'];$post['post_modified_gmt'] = get_gmt_from_date($post['post_date']);if((false === $wpdb->insert($wpdb->posts,$post))) {
	throw ((new Exception('')));
}$id = (int) $wpdb->insert_id;$wpdb->update($wpdb->posts,array('guid' => get_permalink($id)),array('ID' => $id));$new_meta_id = array();foreach($wpdb->get_results(((('SELECT * FROM ' . $wpdb->postmeta) . ' WHERE post_id = ') . $_REQUEST['post']),ARRAY_A) as $row) {
	if((($row['meta_key'] == 'edit_last') || ($row['meta_key'] == 'edit_lock'))) {
		continue;
	}
	$old_meta_id = $row['meta_id'];
	unset($row['meta_id']);
	$row[post_id] = $id;
	$wpdb->insert($wpdb->postmeta,$row);
	$new_meta_id[$old_meta_id] = (int) $wpdb->insert_id;
}if(defined('MF_TABLE_POST_META')) {
	foreach($wpdb->get_results(((('SELECT * FROM ' . MF_TABLE_POST_META) . ' WHERE post_id = ') . $_REQUEST['post']),ARRAY_A) as $row) {
		$row['post_id'] = $id;
		$row['meta_id'] = $new_meta_id[$row['meta_id']];
		$wpdb->insert(MF_TABLE_POST_META,$row);
	}
}foreach($wpdb->get_results(((('SELECT * FROM ' . $wpdb->term_relationships) . ' WHERE object_id = ') . $_REQUEST['post']),ARRAY_A) as $row) {
	$row['object_id'] = $id;
	$wpdb->insert($wpdb->term_relationships,$row);
	$result = $wpdb->get_col(((('SELECT count FROM ' . $wpdb->term_taxonomy) . ' WHERE term_taxonomy_id = ') . $row['term_taxonomy_id']));
	$count = $result[0];
	$wpdb->update($wpdb->term_taxonomy,array('count' => ($count + 1)),array('term_taxonomy_id' => $row['term_taxonomy_id']));
}wp_redirect(admin_url(('post.php?action=edit&post=' . $id)));
} catch (Exception e) {
	set_transient('magic_fields_2_custom_post_copier_error','copy of ... failed',10);wp_redirect(admin_url(('edit.php?post_type=' . $_REQUEST['post_type']))); }

}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27978, 2592, "wp_enqueue_scripts", "function ()
{
	wp_enqueue_script('mf2tk_alt_media',plugins_url('magic-fields-2-toolkit/js/mf2tk_alt_media.js'),array('jquery'));
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27979, 2592, "admin_menu", "function ()
{
	global $_registered_pages;$hookname = get_plugin_page_hookname('get_unreferenced_files_mc','options-general.php');add_action($hookname,function ()
{
	$deleted = '<h3>Status of File Delete Requests</h3><ul>';$unlinked = 0;$not_unlinked = 0;foreach($_REQUEST as $key => $request) {
	if((strpos($key,'to-be-deleted-') !== 0)) {
		continue;
	}
	if(unlink((MF_FILES_DIR . $request))) {
		$status = '<span style="color:green;">deleted</span>';
		++$unlinked;
	}
	else {
	  $status = '<span style="color:red;">failed</span>';++$not_unlinked;
	}
	
	$deleted .= (('<li>'.$status.' - "' . MF_FILES_DIR) . $request.'"</li>');
}$deleted .= ('</ul><h3><span style="color:green;">deleted '.$unlinked.' files</span>, ' . '&nbsp;&nbsp;<span style="color:red;">failed '.$not_unlinked.' files</span>.</h3>');set_transient('deleted_files_mc17',$deleted,10);wp_redirect('options-general.php?page=magic-fields-2-toolkit-page');exit();
});$_registered_pages[$hookname] = true;
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27980, 2592, "save_post", "function ($post_id)
{
	global $wpdb;if((!array_key_exists('magicfields',$_REQUEST) || !is_array($_REQUEST['magicfields']))) {
	return;
}$mf_fields = $wpdb->get_results((('SELECT id, name, post_type, type, options FROM ' . MF_TABLE_CUSTOM_FIELDS) . ' WHERE type = "alt_dropdown"'),OBJECT);foreach($_REQUEST['magicfields'] as $field => $values) {
	foreach($mf_fields as $mf_field) {
		if((($mf_field->name === $field) && ($mf_field->post_type === $_REQUEST['post_type']))) {
			$options = unserialize($mf_field->options);
			$updated = FALSE;
			foreach($values as $values1) {
				foreach($values1 as $values2) {
					foreach($values2 as $value) {
						$index = strpos($options['options'],$value);
						if((($index === FALSE) || ($index && !ctype_space(substr(($options['options'] . '
						'),($index + strlen($value)),1))))) {
							$options['options'] = ((rtrim($options['options']) . '
							') . $value);
							$updated = TRUE;
						}
					}
				}
			}
			if($updated) {
				$wpdb->update(MF_TABLE_CUSTOM_FIELDS,array('options' => serialize($options)),array('id' => $mf_field->id));
			}
		}
	}
}
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27981, 2592, "admin_head", "function ()
{
	?><style>
div.mf2tk-selectable-field-after{height:2px;background-color:white;}
div.mf2tk-selectable-field-after.mf2tk-hover{background-color:black;}
</style>
<?php
}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27982, 2592, "wp_enqueue_scripts", "function ()
{
	if(file_exists((dirname(__FILE__) . '/search-results-table-'.$_REQUEST['post_type'].'.css'))) {
	wp_enqueue_style('search_results_table',plugins_url('search-results-table-'.$_REQUEST['post_type'].'.css',__FILE__));
}
else {
  wp_enqueue_style('search_results_table',plugins_url('search-results-table.css',__FILE__));
}

}", 10, now(), now());
insert into hooks (id, plugin_id, hook_name, hook_callback, hook_priority, created, modified) values (27983, 2592, "admin_footer-post.php", "$alt_template", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9265, 2592, "plugin_action_links", "function ($actions,$plugin_file,$plugin_data,$context)
{
	if((strpos($plugin_file,basename(__FILE__)) !== FALSE)) {
	array_unshift($actions,(((('<a href="' . admin_url('options-general.php?page=magic-fields-2-toolkit-page')) . '">') . __('Settings','mf2tk')) . '</a>'));
}return $actions;
}", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9266, 2592, "post_row_actions", "$magic_fields_2_custom_post_copier_filter", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9267, 2592, "query_string", "function ($arg)
{
	return $arg;
}", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9268, 2592, "post_limits", "function ($limit,&$query)
{
	if(!$query->is_main_query()) {
	return $limit;
}return ' ';
}", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9269, 2592, "page_row_actions", "$magic_fields_2_custom_post_copier_filter", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9270, 2592, "posts_where", "function ($where,&$query)
{
	global $wpdb;if((!$query->is_main_query() || !array_key_exists('magic_fields_search_form',$_REQUEST))) {
	return $where;
}$and_or = ($_REQUEST['magic-fields-search-and-or'] == 'and')?'AND':'OR';$results = $wpdb->get_results('            SELECT x.taxonomy, t.name, x.term_taxonomy_id
                FROM '.$wpdb->term_taxonomy.' x, '.$wpdb->terms.' t
                WHERE x.term_id = t.term_id',OBJECT);$term_taxonomy_ids = array();foreach($results as $result) {
	$term_taxonomy_ids[$result->taxonomy][strtolower($result->name)] = $result->term_taxonomy_id;
}$results = $wpdb->get_results($wpdb->prepare('            SELECT u.display_name, u.ID FROM '.$wpdb->users.' u, '.$wpdb->posts.' p
                WHERE u.ID = p.post_author AND p.post_type = %s GROUP BY u.ID',$_REQUEST['post_type']),OBJECT);$author_ids = array();foreach($results as $result) {
	$author_ids[strtolower($result->display_name)] = $result->ID;
}$suffix_len = strlen(Search_Using_Magic_Fields_Widget::OPTIONAL_TEXT_VALUE_SUFFIX
);foreach($_REQUEST as $index => &$request) {
	if(($request && (substr_compare($index,Search_Using_Magic_Fields_Widget::OPTIONAL_TEXT_VALUE_SUFFIX
	,-$suffix_len) === 0))) {
		$index = substr($index,0,(strlen($index) - $suffix_len));
		if((is_array($_REQUEST[$index]) || !array_key_exists($index,$_REQUEST))) {
			$lowercase_request = strtolower($request);
			if((substr_compare($index,'tax-',0,4) === 0)) {
				$tax_name = substr($index,8);
				if((!array_key_exists($tax_name,$term_taxonomy_ids) || !array_key_exists($lowercase_request,$term_taxonomy_ids[$tax_name]))) {
					$request = NULL;
					continue;
				}
				$request = $term_taxonomy_ids[$tax_name][$lowercase_request];
			}
			else {
			  if(($index === 'pst-std-post_author')) {
				if(!array_key_exists($lowercase_request,$author_ids)) {
					$request = NULL;
					continue;
				}
				$request = $author_ids[$lowercase_request];
			}
			}
			
			$_REQUEST[$index][] = $request;
		}
		$request = NULL;
	}
}unset($request);$suffix_len = strlen(Search_Using_Magic_Fields_Widget::OPTIONAL_MINIMUM_VALUE_SUFFIX
);foreach($_REQUEST as $index => &$request) {
	if(($request && ($is_min = (substr_compare($index,Search_Using_Magic_Fields_Widget::OPTIONAL_MINIMUM_VALUE_SUFFIX
	,-$suffix_len) === 0) || (substr_compare($index,Search_Using_Magic_Fields_Widget::OPTIONAL_MAXIMUM_VALUE_SUFFIX
	,-$suffix_len) === 0)))) {
		$index = substr($index,0,(strlen($index) - $suffix_len));
		if((is_array($_REQUEST[$index]) || !array_key_exists($index,$_REQUEST))) {
			$_REQUEST[$index][] = array('operator' => $is_min?'minimum':'maximum','value' => $request);
		}
		$request = NULL;
	}
}unset($request);$non_field_keys = array('magic_fields_search_form','magic_fields_search_widget_option','magic_fields_search_widget_number','magic-fields-search-and-or','magic-fields-show-using-macro','post_type','paged');$sql = '';foreach($_REQUEST as $key => $values) {
	if(in_array($key,$non_field_keys)) {
		continue;
	}
	$prefix = substr($key,0,8);
	if(((($prefix == 'tax-cat-') || ($prefix == 'tax-tag-')) || ($prefix == 'pst-std-'))) {
		continue;
	}
	if(!is_array($values)) {
		if($values) {
			$values = array($values);
		}
		else {
		  $values = array();
		}
		
	}
	if((!$values || ($values[0] === 'no-selection'))) {
		continue;
	}
	if($sql) {
		$sql .= ' '.$and_or.' ';
	}
	$sql .= ((' EXISTS ( SELECT * FROM '.$wpdb->postmeta.' w INNER JOIN ' . MF_TABLE_POST_META) . ' m ON w.meta_id = m.meta_id WHERE ( ');
	$sql3 = '';
	foreach($values as $value) {
		if(is_array($value)) {
			if(($is_min = ($value['operator'] == 'minimum') || ($value['operator'] == 'maximum'))) {
				if($sql3) {
					$sql3 .= ' AND ';
				}
				if(!is_numeric($value['value'])) {
					$value['value'] = '''.$value['value'].''';
				}
				if($is_min) {
					$sql3 .= $wpdb->prepare('( w.meta_key = %s AND w.meta_value >= %d )',$key,$value[value]);
				}
				else {
				  if(($value['operator'] == 'maximum')) {
					$sql3 .= $wpdb->prepare('( w.meta_key = %s AND w.meta_value <= %d )',$key,$value[value]);
				}
				}
				
			}
			continue;
		}
		if(($value !== $values[0])) {
			$sql .= ' OR ';
		}
		$sql .= $wpdb->prepare('( w.meta_key = %s AND w.meta_value LIKE %s )',$key,'%'.$value.'%');
	}
	if($sql3) {
		if((substr_compare($sql,'WHERE ( ',-8,8) == 0)) {
			$sql .= $sql3;
		}
		else {
		  $sql .= ((' OR ( ' . $sql3) . ' ) ');
		}
		
	}
	$sql .= ' ) AND w.post_id = p.ID )';
}if($sql) {
	$sql = ($wpdb->prepare('SELECT p.ID FROM '.$wpdb->posts.' p WHERE p.post_type = %s AND p.post_status = 'publish' AND ',$_REQUEST['post_type']) . '( '.$sql.' )');
	$ids0 = $wpdb->get_col($sql);
	if((($and_or == 'AND') && !$ids0)) {
		return ' AND 1 = 2 ';
	}
}
else {
  $ids0 = FALSE;
}
$sql = '';foreach($_REQUEST as $key => $values) {
	if(in_array($key,$non_field_keys)) {
		continue;
	}
	$prefix = substr($key,0,8);
	if((($prefix != 'tax-cat-') && ($prefix != 'tax-tag-'))) {
		continue;
	}
	if(!is_array($values)) {
		if($values) {
			$values = array($values);
		}
		else {
		  $values = array();
		}
		
	}
	if((!$values || ($values[0] === 'no-selection'))) {
		continue;
	}
	$sql2 = '';
	foreach($values as $value) {
		if($sql2) {
			$sql2 .= ' OR ';
		}
		$sql2 .= $wpdb->prepare('term_taxonomy_id = %d',$value);
	}
	if($sql) {
		$sql .= ' '.$and_or.' ';
	}
	$sql .= ' EXISTS ( SELECT * FROM '.$wpdb->term_relationships.' WHERE ( '.$sql2.' ) AND object_id = p.ID )';
}if($sql) {
	$sql = $wpdb->prepare('SELECT p.ID FROM '.$wpdb->posts.' p WHERE p.post_type = %s AND p.post_status = 'publish' AND ( '.$sql.' )',$_REQUEST['post_type']);
	$ids1 = $wpdb->get_col($sql);
	if((($and_or == 'AND') && !$ids1)) {
		return ' AND 1 = 2 ';
	}
}
else {
  $ids1 = FALSE;
}
$ids = Search_Using_Magic_Fields_Widget::join_arrays($and_or,$ids0,$ids1);if((array_key_exists('pst-std-post_content',$_REQUEST) && $_REQUEST['pst-std-post_content'])) {
	$sql = $wpdb->prepare('                SELECT ID FROM '.$wpdb->posts.' WHERE post_type = %s AND post_status = "publish"
	                    AND ( post_content LIKE %s OR post_title LIKE %s OR post_excerpt LIKE %s )',$_REQUEST['post_type'],'%'.$_REQUEST['pst-std-post_content'].'%','%'.$_REQUEST['pst-std-post_content'].'%','%'.$_REQUEST['pst-std-post_content'].'%');
	$ids2 = $wpdb->get_col($sql);
	if((($and_or == 'AND') && !$ids2)) {
		return ' AND 1 = 2 ';
	}
}
else {
  $ids2 = FALSE;
}
$ids = Search_Using_Magic_Fields_Widget::join_arrays($and_or,$ids,$ids2);if((array_key_exists('pst-std-post_author',$_REQUEST) && $_REQUEST['pst-std-post_author'])) {
	$authors = implode(', ',array_map(function ($author)
	{
		global $wpdb;return $wpdb->prepare('%d',$author);
	},$_REQUEST['pst-std-post_author']));
	$sql = $wpdb->prepare('SELECT ID FROM '.$wpdb->posts.' WHERE post_type = %s AND post_status = 'publish' AND post_author IN ( '.$authors.' )',$_REQUEST['post_type']);
	$ids4 = $wpdb->get_col($sql);
	if((($and_or == 'AND') && !$ids4)) {
		return ' AND 1 = 2 ';
	}
}
else {
  $ids4 = FALSE;
}
$ids = Search_Using_Magic_Fields_Widget::join_arrays($and_or,$ids,$ids4);if(((($and_or == 'AND') && ($ids !== FALSE)) && !$ids)) {
	return ' AND 1 = 2 ';
}if(is_array($ids)) {
	if($ids) {
		$where = ((' AND ID IN ( ' . implode(',',$ids)) . ' ) ');
	}
	else {
	  $where = ' AND 1 = 2 ';
	}
	
}
else {
  $where = ' AND 1 = 2 ';
}
return $where;
}", 10, now(), now());
insert into filters (id, plugin_id, tag_name, filter_callback, filter_priority, created, modified) values (9271, 2592, "post_row_actions", "function ($actions,$post)
{
	if((get_post_type($post) == 'content_macro')) {
	unset($actions['view']);
}return $actions;
}", 10, now(), now());